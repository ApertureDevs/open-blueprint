name: Continuous Integration checks

on: push

jobs:
  continuous-integration:
    name: Continuous Integration
    runs-on: ubuntu-latest
    steps:

    - name: Checkout
      uses: actions/checkout@master
      
    - name: Docker Build
      run: |
        docker-compose build

    - name: Docker Up
      run: |
        docker-compose up -d

    - name: Add Task runner
      run: |
        curl -sL https://taskfile.dev/install.sh | sh && echo "::add-path::./bin"

    - name: Build
      run: |
        task build --summary
        task build

    - name: NPM audit
      run: |
        task npm-audit --summary
        task npm-audit

    - name: SASS linter
      run: |
        task sass-linter-dry-run --summary
        task sass-linter-dry-run

    - name: HTML linter
      run: |
        task html-linter-dry-run --summary
        task html-linter-dry-run
  